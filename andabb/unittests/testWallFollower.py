import unittest

from andabb.WallFollower import FuzzyWallFollower


class FuzzyAvoidObstacleTest(unittest.TestCase):
    def testTurnRight(self):
        r = [0.002110123634338379, 0.6072200536727905, 2.0]
        r = [0.010628759860992432, 0.6329633593559265, 2.0]
        r = [1.0341405868530273e-05, 0.07219693809747696, 0.7946561574935913, 2.0]
        r = [7.748603820800781e-07, 0.5471609830856323, 0.3700582981109619, 0.4377201199531555]
        r = [0.20466271042823792, 0.5021722316741943, 2.0, 2.0]
        r = [0.0, 2.0, 2.0, 0.09563261270523071]
        r = [-7.569789886474609e-06, 0.5897635817527771, 0.2924635410308838, 0.31005585193634033]
        r = [-4.172325134277344e-07, 0.5269935727119446, 0.3007180392742157, 0.2995576560497284]
        r = [2.703070640563965e-05, 0.07271387428045273, 2.0, 2.0]
        r = [-0.01223611831665039, 0.16998006403446198, 2.0, 2.0]
        r = [-0.01283961534500122, 0.28044313192367554, 2.0, 2.0]
        r = [-5.2928924560546875e-05, 0.8655237555503845, 0.19909876585006714, 0.22167305648326874]
        r = [0.008903861045837402, 0.5420784950256348, 2.0, 2.0]
        r = [-0.006064906716346741, 0.0967487245798111, 2.0, 2.0]
        r = [-7.748603820800781e-07, 0.6034146547317505, 0.05353911593556404, 0.0512881763279438]
        r = [3.635883331298828e-06, 0.6852906942367554, 0.057800956070423126, 0.05239216238260269]
        r = [0.004532486200332642, 0.5005979537963867, 0.14563414454460144, 0.14031454920768738]
        r = [0.0007168054580688477, 0.4960654675960541, 0.16113728284835815, 0.16135066747665405]
        r = [-2.6226043701171875e-06, 0.5295436382293701, 0.1428174376487732, 0.14281180500984192]
        r = [0.013590633869171143, 0.6122346520423889, 2.0, 2.0]
        r = [7.68899917602539e-06, 0.4153732657432556, 2.0, 0.6789962649345398]
        r = [1.3172626495361328e-05, 0.4153621196746826, 2.0, 0.6789881587028503]
        r = [4.172325134277344e-06, 0.8599380850791931, 0.24489204585552216, 0.23540423810482025]
        r = [0.3353755474090576, 0.9357700943946838, 0.45342159271240234, 0.3928143084049225]


        ctr: FuzzyWallFollower = FuzzyWallFollower()

        print(ctr.computeDelta(r[0], r[1], r[2], r[3]))

        ctr.leftFrontSensor.view(sim=ctr.sys)
        ctr.rightFrontSensor.view(sim=ctr.sys)
        ctr.sideSensor.view(sim=ctr.sys)
        ctr.deltaSide.view(sim=ctr.sys)

        ctr.angularCsq.view(sim=ctr.sys)
        ctr.linearCsq.view(sim=ctr.sys)

        print("End")


if __name__ == '__main__':
    unittest.main()
